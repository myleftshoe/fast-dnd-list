{"version":3,"sources":["events.js","Sortable.js","array.js","App.js","index.js"],"names":["preventDefault","e","containerRef","React","createRef","Sortable","state","xy","displacement","i","initialI","handleStart","element","document","elementFromPoint","touches","clientX","clientY","index","Object","toConsumableArray","current","children","indexOf","target","style","pointerEvents","_this","setState","console","log","props","handleMove","_this2","this","_this$state","react_default","a","createElement","overflowY","onContextMenu","className","ref","map","child","translate","concat","transition","transform","WebkitTransform","backgroundColor","onMouseDown","onTouchStart","onTouchMove","cloneElement","Component","defaultProps","raised","dragClassName","move","arr","removeFrom","arguments","length","undefined","insertAt","isNaN","Number","_arr","item","splice","generateItems","Array","keys","k","ReactDOM","render","_useState","useState","_useState2","slicedToArray","items","setItems","Sortable_Sortable","onDrop","_ref","oldIndex","newIndex","key","height","getElementById"],"mappings":"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","file":"static/js/main.560412af.chunk.js","sourcesContent":["export function preventDefault(e) { e.preventDefault() }\r\nexport function stopPropagation(e) { e.stopPropagation() }\r\n\r\nexport function fireAndForget(target, eventName) {\r\n    return new Promise((resolve, reject) => {\r\n        const handler = ({ target }) => {\r\n            target.removeEventListener(eventName, handler, false);\r\n            resolve();\r\n        }\r\n        target.addEventListener(eventName, handler, false);\r\n    })\r\n}\r\n","import React, { useRef, useState, cloneElement, Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { preventDefault } from './events';\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nconst containerRef = React.createRef();\r\n\r\nexport default class Sortable extends Component {\r\n\r\n    state = {\r\n        xy: [0, 0],\r\n        displacement: [0, 0],\r\n        i: null,\r\n        initialI: null,\r\n    }\r\n\r\n\r\n    handleStart = e => {\r\n        // console.log(i, e);\r\n        const element = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n        const index = [...containerRef.current.children].indexOf(element);\r\n        e.target.style.pointerEvents = 'none';\r\n        // setInitialI(index);\r\n        this.setState({ initialI: index, xy: [e.touches[0].clientX, e.touches[0].clientY] });\r\n        // setXy([e.touches[0].clientX, e.touches[0].clientY]);\r\n        console.log('children', this.props.children);\r\n    }\r\n\r\n    handleMove = e => {\r\n        const element = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);\r\n        const index = [...containerRef.current.children].indexOf(element);\r\n        if (index > -1 && index !== this.state.i)\r\n            this.setState({ i: index });\r\n        this.setState({ displacement: [e.touches[0].clientX - this.state.xy[0], e.touches[0].clientY - this.state.xy[1]] });\r\n        // setDisplacement([e.touches[0].clientX - xy[0], e.touches[0].clientY - xy[1]]);\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const { initialI, i, xy, displacement } = this.state;\r\n        return (\r\n\r\n            <div style={{ overflowY: 'scroll' }}\r\n                onContextMenu={preventDefault}\r\n            >\r\n                <div className='container' ref={containerRef}>\r\n                    {props.children.map((child, index) => {\r\n                        let translate;\r\n                        if (index === initialI)\r\n                            translate = `translate3d(${displacement[0]}px, ${displacement[1]}px, 0)`;\r\n                        else if (index < i && index > initialI)\r\n                            translate = `translate3d(0px,-62px,0px)`;\r\n                        else if (index > i && index < initialI)\r\n                            translate = `translate3d(0px,62px,0px)`;\r\n                        // console.log(translate, initialI, i, index)\r\n                        const props = {\r\n                            style: {\r\n                                transition: index === initialI ? null : 'transform 0.2s ease-in-out',\r\n                                transform: translate,\r\n                                WebkitTransform: translate,\r\n                                backgroundColor: 'yellow',\r\n                                // zIndex: !atRest && i === originalPosOfLastPressed ? 100 : 1,\r\n                                // height: `${ rowHeight } px`\r\n                            },\r\n                            onMouseDown: this.handleStart,\r\n                            onTouchStart: this.handleStart,\r\n                            onTouchMove: this.handleMove,\r\n                        }\r\n                        return cloneElement(child, props)\r\n                    })}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nSortable.propTypes = {\r\n    onGrasp: PropTypes.func,\r\n    onDrag: PropTypes.func,\r\n    onDrop: PropTypes.func,\r\n    raised: PropTypes.bool,\r\n    dragClassName: PropTypes.string,\r\n}\r\n\r\nSortable.defaultProps = {\r\n    raised: true,\r\n    dragClassName: 'drag-style',\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n","export const move = (arr, removeFrom = null, insertAt = null) => {\r\n    /*\r\n        Adds item if removeFrom is null\r\n        Removes item if insertAt is null\r\n    */\r\n    if (insertAt === removeFrom) return arr;\r\n    if (isNaN(Number(removeFrom) || isNaN(Number(insertAt)))) return arr;\r\n\r\n    let _arr = [...arr];\r\n\r\n    const item = (removeFrom !== null) ? _arr.splice(removeFrom, 1)[0] : null;\r\n    if (insertAt !== null) {\r\n        _arr.splice(insertAt, 0, item);\r\n    }\r\n\r\n    return _arr;\r\n};\r\n\r\nexport const shuffle = arr => arr\r\n    .map(a => [Math.random(), a])\r\n    .sort((a, b) => a[0] - b[0])\r\n    .map(a => a[1]);\r\n\r\nexport const reverse = arr => arr.slice().reverse();\r\n\r\nexport const reinsert = (arr, from, to) => {\r\n    const _arr = arr.slice(0)\r\n    const val = _arr[from]\r\n    _arr.splice(from, 1)\r\n    _arr.splice(to, 0, val)\r\n    return _arr\r\n}\r\n\r\nexport const clamp = (n, min, max) => Math.max(Math.min(n, max), min);","import React, { useState } from 'react';\r\nimport './App.css';\r\nimport Sortable from './Sortable';\r\nimport { move } from './array';\r\n\r\nconst generateItems = length => [...Array(length).keys()].map(k => `Item ${k}`)\r\n\r\nexport default function App() {\r\n\r\n    let [items, setItems] = useState(generateItems(8));\r\n\r\n    const onDrop = ({ oldIndex, newIndex }) => setItems(move(items, oldIndex, newIndex));\r\n\r\n    return <div className='list'>\r\n        <Sortable dragClassName='drag-style' onDrop={onDrop}>\r\n            {items.map(item =>\r\n                <div key={item} className='list-item' style={{ height: item === 'Item 2' ? '70px' : item === 'Item 4' && '100px' }}>{item}</div>)\r\n            }\r\n        </Sortable>\r\n    </div>\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}