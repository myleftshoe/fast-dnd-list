{"version":3,"sources":["events.js","domUtils (not used).js","Draggable.js","ElementCache.js","Handler.js","Sortable.js","array.js","App.js","index.js"],"names":["preventDefault","e","fireAndForget","target","eventName","Promise","resolve","reject","addEventListener","handler","_ref","removeEventListener","getComputedTranslation","element","window","getComputedStyle","getPropertyValue","match","_ref2","Object","slicedToArray","transitions","grasp","moveIntoPlace","settleIntoPlace","Draggable","props","startPosition","currentPosition","direction","left","offsetLeft","top","offsetTop","height","offsetHeight","width","offsetWidth","_window$getComputedSt","marginTop","marginBottom","marginLeft","marginRight","initialCenter","dimensions","Math","max","parseInt","displacement","absoluteCenter","this","position","_this$displacement","x","y","style","transform","concat","willChange","zIndex","transition","classList","add","dragClassName","raised","_moveIntoPlace","asyncToGenerator","regenerator_default","a","mark","_callee","event","wrap","_context","prev","next","abrupt","requestAnimationFrame","stop","_x","_x2","apply","arguments","drop","_drop","_callee2","relativeIndex","_getComputedTranslati","_getComputedTranslati2","translateX","translateY","offsetX","offsetY","event2","_context2","remove","console","log","_x3","_settleIntoPlace","_callee3","_context3","release","_release","_callee4","_context4","_x4","_x5","elementCache","elements","i","length","push","get","index","count","removeAt","splice","resetStyles","forEach","print","table","map","item","innerText","Handler","container","draggable","draggableIndex","placeholderIndex","rafId","isHolding","children","Array","from","ElementCache","_grasp","indexOf","setTimeout","undefined","move","prevent","repeatUntilNextTouchMove","_getScrollValue","containerRect","getBoundingClientRect","targetRect","bottomOffset","min","bottom","innerHeight","topOffset","maxScrollTop","scrollHeight","clientHeight","offset","scrollTop","getScrollValue","_getScrollValue2","scrollOffset","_draggable","_draggable$absoluteCe","centerY","shift","cancelAnimationFrame","touches","clientX","clientY","_ref2$translateY","oldIndex","newIndex","clearTimeout","Sortable","useEffect","containerRef","current","useRef","_onTouchEnd","result","sent","onDrop","react_default","createElement","className","ref","onTouchStart","onGrasp","onTouchMove","Drag","onDrag","onTouchEnd","onContextMenu","defaultProps","arr","removeFrom","insertAt","isNaN","Number","_arr","toConsumableArray","generateItems","keys","k","ReactDOM","render","_useState","useState","_useState2","items","setItems","key","document","getElementById"],"mappings":"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","file":"static/js/main.17bc21a2.chunk.js","sourcesContent":["export const preventDefault = e => e.preventDefault();\r\n\r\nexport const fireAndForget = (target, eventName) => new Promise((resolve, reject) => {\r\n    const handler = ({ target }) => {\r\n        target.removeEventListener(eventName, handler, false);\r\n        resolve();\r\n    }\r\n    target.addEventListener(eventName, handler, false);\r\n})\r\n","export function getComputedTranslation(element) {\r\n    const transformMatrix = window.getComputedStyle(element).getPropertyValue('transform');\r\n    const [, , , , x, y] = transformMatrix.match(/-?\\d+/g) || [0, 0, 0, 0, 0, 0];\r\n    return [x, y]\r\n}\r\n\r\nexport function getTranslateY(element) {\r\n    return Number((element.style.transform.match(/-?\\d+/g) || [0])[1])\r\n}","import './Draggable.css';\r\nimport { fireAndForget } from './events';\r\nimport { getComputedTranslation } from './domUtils (not used)';\r\n\r\nconst transitions = {\r\n    grasp: 'box-shadow .2s ease-in-out, background-color .2s ease-in-out',\r\n    moveIntoPlace: 'transform .2s ease-in-out',\r\n    settleIntoPlace: 'box-shadow .2s ease-in-out, background-color .2s ease-in-out'\r\n}\r\n\r\nexport default function Draggable(element, props) {\r\n\r\n    let startPosition = null;\r\n    let currentPosition = null;\r\n    let direction = null;\r\n\r\n    const { offsetLeft: left, offsetTop: top, offsetHeight: height, offsetWidth: width } = element;\r\n    const { marginTop, marginBottom, marginLeft, marginRight } = window.getComputedStyle(element);\r\n\r\n    const initialCenter = [left + width / 2, top + height / 2];\r\n    const dimensions = {\r\n        width: width + Math.max(parseInt(marginLeft), parseInt(marginRight)),\r\n        height: height + Math.max(parseInt(marginTop), parseInt(marginBottom)),\r\n    }\r\n\r\n    return {\r\n\r\n        get element() { return element },\r\n\r\n        get direction() { return direction },\r\n\r\n        get displacement() {\r\n            return [\r\n                currentPosition[0] - startPosition[0],\r\n                currentPosition[1] - startPosition[1],\r\n            ]\r\n        },\r\n\r\n        get dimensions() { return dimensions },\r\n\r\n        get absoluteCenter() {\r\n            return [initialCenter[0] + this.displacement[0], initialCenter[1] + this.displacement[1]];\r\n        },\r\n\r\n        // get absoluteCenter() {\r\n        //     const { left, top, height, width } = element.getBoundingClientRect();\r\n        //     return [left + width / 2, top + height / 2];\r\n        //     // return [element.offsetLeft + this.dimensions.width / 2, element.offsetTop + this.dimensions.height / 2];\r\n        // },\r\n\r\n        set position(position) {\r\n            if (currentPosition) {\r\n                if (position[1] < currentPosition[1])\r\n                    direction = 'up';\r\n                else\r\n                    direction = 'down';\r\n            }\r\n            currentPosition = position;\r\n            if (!startPosition)\r\n                startPosition = currentPosition;\r\n            const [x, y] = this.displacement;\r\n            element.style.transform = `translate(${x}px,${y}px)`;\r\n        },\r\n\r\n        get position() { return currentPosition },\r\n\r\n        grasp() {\r\n            element.style.willChange = 'transform';\r\n            element.style.zIndex = 999;\r\n            // element.style.pointerEvents = 'none';\r\n            element.style.position = 'relative';\r\n            element.style.transition = transitions.grasp;\r\n            element.classList.add(props.dragClassName);\r\n            props.raised && element.classList.add('shadow');\r\n        },\r\n\r\n        async moveIntoPlace(x, y) {\r\n            if (currentPosition === startPosition)\r\n                return Promise.resolve();\r\n            const event = fireAndForget(element, \"transitionend\");\r\n            requestAnimationFrame(() => {\r\n                element.style.transition = transitions.moveIntoPlace;\r\n                element.style.transform = `translate(0px,${1}px)`;\r\n            });\r\n            await event;\r\n            return event;\r\n        },\r\n\r\n\r\n        async drop(relativeIndex) {\r\n\r\n            const event = fireAndForget(element, \"transitionend\");\r\n\r\n            const [translateX, translateY] = getComputedTranslation(element);\r\n            const [offsetX, offsetY] = [translateX, translateY - this.dimensions.height * relativeIndex];\r\n\r\n            // By now item has moved to new location. Translate instantly to new position maintaining drag offset\r\n            requestAnimationFrame(() => {\r\n                element.style.transform = `translate(${offsetX}px,${offsetY}px)`;\r\n                requestAnimationFrame(() => {\r\n                    element.style.transition = transitions.moveIntoPlace;\r\n                    element.style.transform = `translate(0px,${1}px)`;\r\n                });\r\n            });\r\n            // this.moveIntoPlace();\r\n            await event;\r\n            element.style.position = null;\r\n            // element.style.pointerEvents = null;\r\n            element.style.zIndex = null;\r\n            element.style.transition = null;\r\n            element.style.transform = null;\r\n            const event2 = fireAndForget(element, \"transitionend\");\r\n            requestAnimationFrame(() => {\r\n                element.classList.remove(props.dragClassName);\r\n                element.classList.remove('shadow');\r\n                element.style.transition = transitions.settleIntoPlace;\r\n            });\r\n            await event2;\r\n            console.log('fdsdfsdff');\r\n            return event2;\r\n        },\r\n\r\n\r\n\r\n        async settleIntoPlace() {\r\n            const event = fireAndForget(element, \"transitionend\");\r\n            requestAnimationFrame(() => {\r\n                element.classList.remove(props.dragClassName);\r\n                element.classList.remove('shadow');\r\n                element.style.transition = transitions.settleIntoPlace;\r\n            });\r\n            await event;\r\n            return event;\r\n        },\r\n\r\n        async release(x, y) {\r\n            await this.moveIntoPlace(x, y);\r\n            await this.settleIntoPlace();\r\n            element.style.position = null;\r\n            // element.style.pointerEvents = null;\r\n            element.style.zIndex = null;\r\n            element.style.transition = null;\r\n            element.style.transform = null;\r\n        }\r\n    }\r\n}\r\n","export default function elementCache(elements) {\r\n\r\n    const elementCache = [];\r\n\r\n    for (let i = 0; i < elements.length; i++) {\r\n        const element = elements[i];\r\n        elementCache.push({ element, top: element.offsetTop, height: element.offsetHeight, translateY: 0 });\r\n    }\r\n\r\n    return {\r\n\r\n        get: index => elementCache[index],\r\n\r\n        get count() { return elementCache.length },\r\n\r\n        removeAt(index) { elementCache.splice(index, 1) },\r\n\r\n        resetStyles() {\r\n            elementCache.forEach(({ element }) => {\r\n                element.style.transition = null;\r\n                element.style.transform = null;\r\n            });\r\n        },\r\n\r\n        print() {\r\n            console.table(elementCache.map(element => {\r\n                const { element: { innerText: item }, top, translateY } = element;\r\n                return { item, top, translateY }\r\n            }));\r\n        }\r\n    }\r\n\r\n}","import Draggable from './Draggable';\r\nimport ElementCache from './ElementCache';\r\nimport { preventDefault } from './events';\r\n\r\nexport default function (container, props) {\r\n\r\n    let draggable;\r\n    let draggableIndex;\r\n    let placeholderIndex;\r\n    const children = Array.from(container.children);\r\n    let elementCache = new ElementCache(children);\r\n    let rafId;\r\n    let isHolding;\r\n\r\n    return {\r\n\r\n        async grasp(e) {\r\n\r\n            if (e.target === container || draggable) return;\r\n\r\n            draggable = new Draggable(e.target, props);\r\n\r\n            draggableIndex = children.indexOf(draggable.element);\r\n            placeholderIndex = draggableIndex;\r\n\r\n            elementCache.removeAt(draggableIndex);\r\n\r\n            isHolding = setTimeout(() => {\r\n                isHolding = undefined;\r\n                disableScrolling();\r\n                draggable.grasp();\r\n            }, 300);\r\n\r\n        },\r\n\r\n        move(e) {\r\n\r\n            if (prevent()) return;\r\n\r\n            rafId = requestAnimationFrame(repeatUntilNextTouchMove);\r\n\r\n            const [x, y] = [e.touches[0].clientX, e.touches[0].clientY];\r\n\r\n            // Allows auto scroll to continue when draggable is held in same place\r\n            function repeatUntilNextTouchMove() {\r\n\r\n                const [scrollTop, scrollOffset] = getScrollValue();\r\n                container.scrollTop = scrollTop;\r\n                draggable.position = [x, y + scrollTop];\r\n\r\n                const { direction, dimensions: { height }, absoluteCenter: [, centerY] } = draggable;\r\n\r\n                if (direction === 'down') {\r\n                    for (placeholderIndex; placeholderIndex < elementCache.count; placeholderIndex++) {\r\n                        const element = elementCache.get(placeholderIndex);\r\n                        if (element.top > centerY) break;\r\n                        element.top -= height;\r\n                        element.translateY -= height;\r\n                        shift(element);\r\n                    }\r\n                }\r\n                else if (direction === 'up') {\r\n                    for (placeholderIndex; placeholderIndex > 0; placeholderIndex--) {\r\n                        const element = elementCache.get(placeholderIndex - 1);\r\n                        const bottom = element.top + element.height;\r\n                        if (bottom < centerY) break;\r\n                        element.top += height;\r\n                        element.translateY += height;\r\n                        shift(element);\r\n                    }\r\n                }\r\n\r\n                if (placeholderIndex <= 0 || placeholderIndex >= elementCache.count || scrollOffset === 0)\r\n                    cancelAnimationFrame(rafId);\r\n                else\r\n                    rafId = requestAnimationFrame(repeatUntilNextTouchMove);\r\n\r\n            }\r\n\r\n            function shift({ element, translateY = 0 }) {\r\n                // element.style.willChange = 'transform';\r\n                element.style['transition'] = 'transform .2s ease-in-out';\r\n                element.style['transform'] = `translateY(${translateY}px)`;\r\n            }\r\n\r\n        },\r\n\r\n        release(e) {\r\n\r\n            if (prevent()) return {};\r\n\r\n            enableScrolling();\r\n\r\n            // await draggable.release(0, container.children[placeholderIndex].offsetTop);\r\n            draggable.drop(placeholderIndex - draggableIndex);\r\n\r\n            elementCache.resetStyles();\r\n\r\n            draggable = undefined;\r\n\r\n            return { oldIndex: draggableIndex, newIndex: placeholderIndex }\r\n        }\r\n    }\r\n\r\n    function disableScrolling() {\r\n        container.addEventListener('touchmove', preventDefault);\r\n    }\r\n\r\n    function enableScrolling() {\r\n        container.removeEventListener('touchmove', preventDefault);\r\n    }\r\n\r\n    function prevent() {\r\n\r\n        if (isHolding) {\r\n            clearTimeout(isHolding);\r\n            isHolding = undefined;\r\n            draggable = undefined;\r\n        }\r\n\r\n        if (!draggable) return true;\r\n\r\n        cancelAnimationFrame(rafId);\r\n\r\n        return false;\r\n    }\r\n\r\n    function getScrollValue() {\r\n\r\n        // let scrollContainer = draggable.element.parentNode;\r\n        // while (scrollContainer) {\r\n        //     if (scrollContainer === document.body) break;\r\n        //     if (scrollContainer.scrollHeight > scrollContainer.clientHeight && window.getComputedStyle(scrollContainer)['overflow-y'] !== 'visible') break;\r\n        //     scrollContainer = scrollContainer.parentNode;\r\n        // }\r\n        // scrollContainer = scrollContainer || document.body;\r\n\r\n        const triggerOffset = 80;\r\n        const speedMultiplier = 0.25;\r\n\r\n        const containerRect = container.getBoundingClientRect();\r\n        const targetRect = draggable.element.getBoundingClientRect();\r\n        const bottomOffset = Math.min(containerRect.bottom, window.innerHeight) - targetRect.bottom;\r\n        const topOffset = targetRect.top - Math.max(containerRect.top, 0);\r\n        const maxScrollTop = container.scrollHeight - Math.min(container.clientHeight, window.innerHeight);\r\n\r\n        let offset = 0;\r\n        if (bottomOffset < triggerOffset)\r\n            offset = Math.min(triggerOffset, triggerOffset - bottomOffset);\r\n        else if (topOffset < triggerOffset)\r\n            offset = Math.max(-triggerOffset, topOffset - triggerOffset);\r\n\r\n        const top = Math.max(0, Math.min(maxScrollTop, container.scrollTop + offset * speedMultiplier));\r\n\r\n        return [top, offset];\r\n    }\r\n\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Handler from './Handler';\r\nimport { preventDefault } from './events';\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nexport default function Sortable(props) {\r\n\r\n    useEffect(() => {\r\n        handler = new Handler(containerRef.current, props);\r\n    });\r\n\r\n    const containerRef = useRef();\r\n\r\n    let handler;\r\n\r\n    function onTouchStart(e) {\r\n        // e.stopPropagation();\r\n        handler.grasp(e);\r\n        props.onGrasp && props.onGrasp();\r\n    }\r\n\r\n    function onTouchMove(e) {\r\n        // e.stopPropagation();\r\n        handler.move(e);\r\n        props.Drag && props.onDrag();\r\n    }\r\n\r\n    async function onTouchEnd(e) {\r\n        // e.stopPropagation();\r\n        const result = await handler.release(e);\r\n        props.onDrop && props.onDrop(result)\r\n    }\r\n\r\n    return <div\r\n        className='container'\r\n        ref={containerRef}\r\n        onTouchStart={onTouchStart}\r\n        onTouchMove={onTouchMove}\r\n        onTouchEnd={onTouchEnd}\r\n        onContextMenu={preventDefault}\r\n    >\r\n        {props.children}\r\n    </div>\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nSortable.propTypes = {\r\n    onGrasp: PropTypes.func,\r\n    onDrag: PropTypes.func,\r\n    onDrop: PropTypes.func,\r\n    raised: PropTypes.bool,\r\n    dragClassName: PropTypes.string,\r\n}\r\n\r\nSortable.defaultProps = {\r\n    raised: true,\r\n    dragClassName: 'drag-style',\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n","export const move = (arr, removeFrom=null, insertAt=null) => {\r\n    /*\r\n        Adds item if removeFrom is null\r\n        Removes item if insertAt is null\r\n    */\r\n    if (insertAt === removeFrom) return arr;\r\n    if (isNaN(Number(removeFrom) || isNaN(Number(insertAt)))) return arr;\r\n\r\n    let _arr = [...arr];\r\n\r\n    const item = (removeFrom !== null) ? _arr.splice(removeFrom, 1)[0] : null;\r\n    if (insertAt !== null) {\r\n        _arr.splice(insertAt, 0, item);\r\n    }\r\n\r\n    return _arr;\r\n  };\r\n\r\nexport const shuffle = arr => arr\r\n    .map(a => [Math.random(), a])\r\n    .sort((a, b) => a[0] - b[0])\r\n    .map(a => a[1]);\r\n\r\nexport const reverse = arr => arr.slice().reverse();","import React, { useState } from 'react';\r\nimport './App.css';\r\nimport Sortable from './Sortable';\r\nimport { move } from './array';\r\n\r\nconst generateItems = length => [...Array(length).keys()].map(k => `Item ${k}`)\r\n\r\nexport default function App() {\r\n\r\n    let [items, setItems] = useState(generateItems(80));\r\n\r\n    const onDrop = ({ oldIndex, newIndex }) => setItems(move(items, oldIndex, newIndex));\r\n\r\n    return <div className='list'>\r\n        <Sortable dragClassName='drag-style' onDrop={onDrop}>\r\n            {items.map(item =>\r\n                <div key={item} className='list-item'>{item}</div>)\r\n            }\r\n        </Sortable>\r\n    </div>\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}